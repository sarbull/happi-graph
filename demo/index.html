<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes">

    <title>happi-graph demo</title>

    <script src="../node_modules/@webcomponents/webcomponentsjs/webcomponents-loader.js"></script>

    <script type="module">
      import '@polymer/iron-demo-helpers/demo-pages-shared-styles';
      import '@polymer/iron-demo-helpers/demo-snippet';
    </script>

    <script type="module" src="../happi-graph.js"></script>

    <style>
      .container {
        height:400px;
      }

      .bordered {
        border:2px solid #777;
      }
    </style>
  </head>
  <body>
    <button id="zoomIn">+</button>
    <button id="zoomOut">-</button>
    <button id="centerGraph">Center Graph</button>
    <button id="remove-data">remove-data</button>
    <button id="add-data">add-data</button>

    <br/><br/>

    <div class="container bordered">
      <happi-graph id="happi-graph"></happi-graph>
    </div>

    <br/><br/>

    <div class="container bordered">
      <happi-graph id="happi-graph-two"></happi-graph>
    </div>

    <script>
      let propertiesMap = {
        SimpleSquare: 'simple-square'
      };

      let iconsMap = {
        'simple-square': `<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0 0H20V20H0V0Z" fill="white"/></svg>`,
      };

      let happiGraphInstance = document.querySelector('#happi-graph');
      let zoomIn = document.querySelector('#zoomIn');
      let zoomOut = document.querySelector('#zoomOut');
      let centerGraph = document.querySelector('#centerGraph');


      let data = {
        nodes: [
          {id: 0, x: 0, y: 375},
          {id: 1, x: 150, y: 0},

          {id: 2, x: 150, y: 150 },
          {id: 3, x: 300, y: 150 },
          {id: 4, x: 450, y: 150 },

          {id: 5, x: 150, y: 300},
          {id: 6, x: 150, y: 450},
          {id: 7, x: 150, y: 600},
          {id: 8, x: 150, y: 750},

          {id: 9, x: 600, y: 150 },
          {id: 10, x: 750, y: 150 },
          {id: 11, x: 900, y: 150 },
          {id: 12, x: 1050, y: 150 },
          {id: 13, x: 1200, y: 150 },
          {id: 14, x: 1350, y: 150 },
          {id: 15, x: 1500, y: 150 }
        ],
        links: []
      };

      data.links = [
        { from: data.nodes[0], to: data.nodes[1], connectionFrom: false, connectionTo: true },
        { from: data.nodes[0], to: data.nodes[2], connectionFrom: false, connectionTo: true },
        { from: data.nodes[0], to: data.nodes[5], connectionFrom: false, connectionTo: true },
        { from: data.nodes[0], to: data.nodes[6], connectionFrom: false, connectionTo: true },
        { from: data.nodes[0], to: data.nodes[7], connectionFrom: false, connectionTo: true },
        { from: data.nodes[0], to: data.nodes[8], connectionFrom: false, connectionTo: true },

        { from: data.nodes[2], to: data.nodes[3], connectionFrom: false, connectionTo: true },
        { from: data.nodes[3], to: data.nodes[4], connectionFrom: false, connectionTo: true },
        { from: data.nodes[4], to: data.nodes[9], connectionFrom: false, connectionTo: true },
        { from: data.nodes[9], to: data.nodes[10], connectionFrom: false, connectionTo: true },
        { from: data.nodes[10], to: data.nodes[11], connectionFrom: false, connectionTo: true },
        { from: data.nodes[11], to: data.nodes[12], connectionFrom: false, connectionTo: true },
        { from: data.nodes[12], to: data.nodes[13], connectionFrom: false, connectionTo: true },
        { from: data.nodes[13], to: data.nodes[14], connectionFrom: false, connectionTo: true },
        { from: data.nodes[14], to: data.nodes[15], connectionFrom: false, connectionTo: true }
      ];

      happiGraphInstance.iconsMap = iconsMap;
      happiGraphInstance.propertiesMap = propertiesMap;
      happiGraphInstance.data = data;

      let happiGraphInstance2 = document.querySelector('#happi-graph-two');

      let data2 = {
        nodes: [
          {id: 0, x: 0, y: 200},
          {id: 1, x: 600, y: 0},
          {id: 2, x: 600, y: 200},
          {id: 3, x: 600, y: 400},
        ],
        links: []
      };

      data2.links = [
        { from: data2.nodes[0], to: data2.nodes[1], connectionFrom: false, connectionTo: true },
        { from: data2.nodes[0], to: data2.nodes[2], connectionFrom: false, connectionTo: true },
        { from: data2.nodes[0], to: data2.nodes[3], connectionFrom: false, connectionTo: true }
      ];

      happiGraphInstance2.data = data2;
      happiGraphInstance2.iconsMap = iconsMap;
      happiGraphInstance2.propertiesMap = propertiesMap;

      zoomIn.addEventListener('click', () => {
        happiGraphInstance.customZoomIn();
        happiGraphInstance2.customZoomIn();
      });

      zoomOut.addEventListener('click', () => {
        happiGraphInstance.customZoomOut();
        happiGraphInstance2.customZoomOut();
      });

      centerGraph.addEventListener('click', () => {
        happiGraphInstance.centerGraph();
        happiGraphInstance2.centerGraph();
      });

      document.querySelector('#remove-data').addEventListener('click', () => {
        happiGraphInstance.removeData();
        happiGraphInstance2.removeData();
      });

      document.querySelector('#add-data').addEventListener('click', () => {
        happiGraphInstance.data = { ...data };
        happiGraphInstance2.data = { ...data2 };
      });
    </script>
  </body>
</html>
